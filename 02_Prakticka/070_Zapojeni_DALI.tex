\chap Návrh světelného ovládání

\medskip \clabel[ovl1]{Board}
\picw=10cm \cinspic 03_Obrazky/Ovladani/board.png
\caption/f Board
\medskip

\medskip \clabel[ovl2]{Návrh tlačítek}
\picw=15cm \cinspic 03_Obrazky/Ovladani/buttons.png
\caption/f Buttons
\medskip





Postup zapojení
    • Nebude, žádný tam není. Jsou tam jen vypínače připojené na diming vstupy předřadníků.
    • 

    • zapojila jsem světla do zásuvky
    • zapojila světla do řídící jednotky
    • a zdroj 12 V
    • dokumentace řídicí jednotky
    • byla pouzit protokol DALI
    • ridici jednotka s ESP32

    • na začátku bylo zapotřebí zvolit správné piny pro ovládání světel a tlačítek
    • dále jsme museli nastavit adresy jednotlivým světelným zařízením – pomcí inicialize a nebo postupným odpojováním/zapojováním světel a pomocí fce set short adress – nastavime pomoci broadcast
    • použité fce: on, off, set max level, set min level, set systém failure level, set power on level, set fade time, set fade rate, set short adress, set scene, go to scene, identify device, add to group, remove from group, set operating mode
    • dále jsme si mohli spravne nastaveni adres overit fci identify device, při spravnem nastaveni svetla zacalo blikat po dobu 10s
    • v mem pripade mam adresy nastavene od 0-4??? overit
    • pote jsem nastavila groupy, sceny a dale priradila jednotlive sceny ke konkretnim tlacitkum,
    • tlacitko off – slouzi k uplenemu vypnuti
    • tlacitko vyklad
    • tlacitko pisemka
    • tlacitko denní svetlo
    • tlacitko regulace jasu, kdy při dlouhem stisku se intenzita zvysovala/snizovala
    • při zmene jasu, se při stiknuti tlacitka s konkretni scenou, vratila scena do puvodniho stavu
    • pro budoucí implemenatci jsou sceny navrzeny dle normy viz simulace
    • pro laboratorni ulohy, abychom navrzene zapojeni mohli overit byly zvoleny tyto scény,
    • scena off
    • scena vyklad, svetla prima vypla nahore zapla
    • scena pisemnka: prima zapla, horni zapla s mensi intenzitou
    • scena denní svetlo, svetal s ruznou intenzitou od nejnizsi po nejvyssi
    • tlacitka na regulaci jasu
    • vyvojove diagamy s logikou tlacitek: při kazdem stisku se zapne konkretni scena, u regulaci jasu, je i pouzit cas, kde při stisku se jas zvysuje nebo snizuje
    • zapojeni bylo v laboratori vyzkouseno a funguje
    • zapojeni v praxi nelze nyní uskutecnit, protože vsehcny instalace ve skolach probihaji mino vyukove obdobi
    • 


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\medskip
\medskip
\medskip
V učebně je momentálně instalováno dvanáct tlačítek, která způsobují potíže běžným uživatelům. Z navrhovaných scén bylo vybráno implementovat tlačítko pro úplné vypnutí všech světel, tlačítko pro scénu výuky, písemka a denní osvětlení. Dále jsem přidala tlačítko pro regulaci jasu, aby uživatelé měli možnost přizpůsobit si osvětlení podle svých preferencí v případě výrazných změn denního světla.

Vzhledem k tomu, že mi nebylo umožněno změnit ovládací panel v učebně během školního roku. Ovládací zařízení jsem navrhla a zapojila v laboratorních podmínkách. Jako řídící jednotka byla zvolena ESP3 (viz dokumentace). Pro zapojení byly vybrány piny podle schématu. Jedná se o digitální porty, a k analogovým prvkům byly přidány dva odpory pro vytvoření pull-up rezistoru. Logika tlačítek byla navržena tak, že každým stiskem se aktivuje odpovídající scéna. U tlačítek pro regulaci jasu je nutné stisk držet déle, aby došlo ke změně jasu.

Postup zapojení:
\begitems
    * zapojila jsem světla do zásuvky
    * zapojila světla do řídící jednotky
    * a zdroj 12 V
\enditems
\medskip
Postup implementace 
\medskip
Nastaveni pinu

\medskip
\picw=8cm \cinspic 03_Obrazky/koood.png
% \caption/f Učebna
\medskip

Dale bylo zapotrebi implementovat fucnkce - prikazy

void setup, void loop, priklad funkce, diagram logiky tlacitka







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \sec Návrh ovládacího panelu

% Navrhla jsem ovládací panel, aby bylo jednodušší ovládání pro uživatelé. 

% \medskip
% Aktuálně je v učebně ovládací panel s 12 tlačítky. Navrhla jsem 3 hlavní scény, které se budou zapínat 3 tlačítky, dále je přidáno tlačítko off na ṕlné vypnutí a také jsem přidala tlačítko na regulaci intenzity jasu. Kdyby docházelo k nečekaným změnám venkovního počasí. 

% Tlačítko výklad, slouží k zapnutí nepřímého osvětlení a vypnutí první světelné řady u tabule.

% Tlačítko písemka umožňuje nasvícení místa úkonu na 500 lx, abychom dodržovali zásady normy.

% Tlačítko adaptace na denní světlo rozsvicuje řadu světel u dvěří a a postupnou změnu intezity 

% \medskip
% Simulace

% \medskip
% jasova analyza